
<form [formGroup]="outsourcingForm" (ngSubmit)="onSubmit()" class="space-y-4 text-left">

  <!-- Client and Printer Selection -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    <div>
      <label for="clientId" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Cliente</label>
      <select id="clientId" formControlName="clientId" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600" required>
        <option value="" disabled>Selecione um cliente</option>
        @for(client of clients(); track client.id) {
            <option [value]="client.id">{{ client.trade_name }}</option>
        }
      </select>
    </div>
    <div>
      <label for="printerId" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Impressora</label>
      <select id="printerId" formControlName="printerId" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600" required [disabled]="!selectedClientId()">
        <option value="" disabled>Selecione uma impressora</option>
        @for(printer of availablePrinters(); track printer.id) {
            <option [value]="printer.id">{{ printer.model }} ({{ printer.serial_number }})</option>
        }
      </select>
    </div>
  </div>

  <!-- Date Period -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    <div>
      <label for="startDate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Data Inicial da Coleta</label>
      <input type="date" id="startDate" formControlName="startDate" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600" required>
    </div>
    <div>
      <label for="endDate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Data Final da Coleta</label>
      <input type="date" id="endDate" formControlName="endDate" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600" required>
    </div>
  </div>

  <!-- Counters -->
  <div class="pt-4 mt-4 border-t dark:border-gray-600">
    <p class="text-base font-medium text-gray-900 dark:text-white mb-2">Contadores</p>
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div>
            <label for="initialCounterBw" class="block mb-2 text-sm font-medium">Inicial P&B</label>
            <input type="number" id="initialCounterBw" formControlName="initialCounterBw" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
        <div>
            <label for="finalCounterBw" class="block mb-2 text-sm font-medium">Final P&B</label>
            <input type="number" id="finalCounterBw" formControlName="finalCounterBw" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
        <div>
            <label for="initialCounterColor" class="block mb-2 text-sm font-medium">Inicial Cor</label>
            <input type="number" id="initialCounterColor" formControlName="initialCounterColor" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
        <div>
            <label for="finalCounterColor" class="block mb-2 text-sm font-medium">Final Cor</label>
            <input type="number" id="finalCounterColor" formControlName="finalCounterColor" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
    </div>
  </div>

  <!-- Contract Details -->
  <div class="pt-4 mt-4 border-t dark:border-gray-600">
    <p class="text-base font-medium text-gray-900 dark:text-white mb-2">Detalhes do Contrato</p>
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div>
            <label for="includedPagesBw" class="block mb-2 text-sm font-medium">Franquia P&B</label>
            <input type="number" id="includedPagesBw" formControlName="includedPagesBw" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
        <div>
            <label for="costPerPageBw" class="block mb-2 text-sm font-medium">Custo Exced. P&B</label>
            <input type="number" step="0.01" id="costPerPageBw" formControlName="costPerPageBw" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
        <div>
            <label for="includedPagesColor" class="block mb-2 text-sm font-medium">Franquia Cor</label>
            <input type="number" id="includedPagesColor" formControlName="includedPagesColor" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
        <div>
            <label for="costPerPageColor" class="block mb-2 text-sm font-medium">Custo Exced. Cor</label>
            <input type="number" step="0.01" id="costPerPageColor" formControlName="costPerPageColor" class="bg-gray-50 border border-gray-300 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        </div>
    </div>
  </div>

  <div>
      <label for="status" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Status</label>
      <select id="status" formControlName="status" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-600">
        <option value="Aberto">Aberto</option>
        <option value="Faturado">Faturado</option>
      </select>
  </div>

  <div class="flex justify-end pt-4 space-x-2">
    <button type="button" (click)="onCancel()" class="text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 rounded-lg text-sm px-5 py-2.5 dark:bg-gray-700 dark:text-gray-200">
      Cancelar
    </button>
    <button type="submit" [disabled]="outsourcingForm.invalid" class="text-white bg-primary-600 hover:bg-primary-700 font-medium rounded-lg text-sm px-5 py-2.5 disabled:opacity-50">
      Salvar
    </button>
  </div>
</form>
